(()=>{"use strict";class t{static MAX_COOKIE_EXPIRATION_DAYS=7;utility;logger;constructor(t,e){this.utility=t,this.logger=e,this.logger.repositoryLoaded(),this.initialize()}initialize(){this.utility.triggerEvent(document,"Repository.Cookie.Ready",null,1)}setCookie(t,e,o,n=!0){const i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);const s="expires="+i.toUTCString();n&&this.logger.actionTriggered("Setting Cookie",e),document.cookie=t+"="+e+";"+s+";path=/;SameSite=Lax"+("https:"===location.protocol?";secure":"")}getCookie(t){const e=t+"=",o=decodeURIComponent(document.cookie).split(";");for(let t=0,n=o.length;t<n;t++){let n=o[t]??"";if(n=n.trimStart(),0===n.indexOf(e))return n.substring(e.length)}return""}renewCookie(t,e){const o=this.getCookie(t);""!==o&&(this.logger.actionTriggered("Renew Cookie",t),this.setCookie(t,o,e,!1))}deleteCookie(t){""!==this.getCookie(t)&&(this.logger.actionTriggered("Delete Cookie",t),this.setCookie(t,"",-1))}set(e,o,n=!1){const i=n?0:t.MAX_COOKIE_EXPIRATION_DAYS;this.setCookie(e,o,i)}get(t){return this.getCookie(t)}renew(e,o=!1){const n=o?0:t.MAX_COOKIE_EXPIRATION_DAYS;this.renewCookie(e,n)}delete(t){this.deleteCookie(t)}}class e{utility;logger;storage={};constructor(t,e){this.utility=t,this.logger=e,this.logger.repositoryLoaded(),this.initialize()}initialize(){this.initStorageKeys(localStorage),this.initStorageKeys(sessionStorage),this.utility.triggerEvent(document,"Repository.LocalStorage.Ready",null,1)}initStorageKeys(t){const e=Object.keys(t);for(const o of e)this.storage[o]=t}setData(t,e,o=!1){const n=this.storage[t];null!=n&&n.setItem(t,e)}getDataByKey(t){const e=this.storage[t];if(null!=e){const o=e.getItem(t);return null===o?"":o}return""}deleteDataByKey(t){const e=this.storage[t];null!=e&&e.removeItem(t)}set(t,e,o=!1){this.deleteDataByKey(t),this.storage[t]=o?sessionStorage:localStorage,this.setData(t,e,o)}get(t){return this.getDataByKey(t)}renew(t,e=!1){const o=this.getDataByKey(t);""!==o&&this.set(t,o,e)}delete(t){this.deleteDataByKey(t)}}class o{logger;constructor(t){this.logger=t,this.logger.serviceLoaded(),this.initialize()}initialize(){setTimeout(()=>{this.triggerEvent(document,"Service.Utility.Ready",null)},1)}triggerEventInternal(t,e,o){let n;n=null!=o?new CustomEvent(e,{detail:o}):new Event(e),this.logger.actionTriggered("Triggering event",e),t.dispatchEvent(n)}triggerEvent(t,e,o=null,n=0){0===n?this.triggerEventInternal(t,e,o):setTimeout(()=>{this.triggerEventInternal(t,e,o)},n)}formDataToObject(t){const e={};return t.forEach((t,o)=>{const n=e[o];void 0===n?e[o]=t:Array.isArray(n)?n.push(t):e[o]=[n,t]}),e}objectToFormData(t){const e=new FormData;for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const n=t[o];if(n instanceof Blob)e.append(o,n);else if(Array.isArray(n))for(const t of n)e.append(o,t instanceof Blob?t:String(t));else null==n?e.append(o,""):e.append(o,String(n))}return e}getEventPath(t){const e=t.composedPath?t.composedPath():t.path,o=t.target;return void 0!==e?e.indexOf(window)<0?e.concat([window]):e:o===window?[window]:[o].concat(function t(e,o=[]){const n=e?.parentNode??null;return n?t(n,o.concat([n])):o}(o)).concat([window])}getDeviceOs(){const t=navigator,e=((t.userAgentData&&t.userAgentData.platform?String(t.userAgentData.platform):"")+" "+(t.platform?String(t.platform):"")+" "+(t.userAgent?String(t.userAgent):"")).trim();if(!e)return"Unknown";const o=[{tokens:["Win","Windows NT","Win32","Win64"],name:"Windows"},{tokens:["Mac","MacIntel","Macintosh"],name:"MacOS"},{tokens:["X11"],name:"Unix"},{tokens:["Linux"],name:"Linux"},{tokens:["iPhone","iPad","iPod"],name:"iOS"},{tokens:["Android"],name:"Android"}];for(const t of o)for(const o of t.tokens)if(-1!==e.indexOf(o))return t.name;return"Unknown"}readStylesheetsByClassName(t){const e=document.styleSheets||new window.StyleSheetList,o={},n=Array.from(e);for(const e of n)try{if(!e.href||!e.href.includes(location.hostname))continue;const n=e.cssRules?Array.from(e.cssRules):[];for(const e of n){if(e instanceof CSSImportRule||e instanceof CSSMediaRule)continue;const n=e;if(n.selectorText&&n.selectorText.includes("."+t)){const t=n.selectorText;o[t]={};const e=[],i=n.style;for(let t=0;t<i.length;t++){const o=i.item(t);if(!o)continue;const n=o.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());e.push(n)}for(let n=0;n<e.length;n++){const s=e[n];if(null==s)continue;const r=i[s];void 0!==r&&(o[t][s]=r)}}}}catch(t){}return o}endarkenColor(t){const e=this.colorToHex(t).replace("#","");let o,n="#";for(o=0;o<3;o++){const t=e.substring(2*o,2*o+2),i=parseInt(t,16);n+=Math.round(Math.min(Math.max(0,i+-.25*i),255)).toString(16).padStart(2,"0")}return n}colorToHex(t){let e=document.createElement("canvas").getContext("2d");if(!e)return this.logger.actionFailed("Unable to create canvas context for color conversion",t),"000000";e.fillStyle=t,e.fillRect(0,0,1,1);const o=e.getImageData(0,0,1,1).data;return"#"+[o[0]??0,o[1]??0,o[2]??0].map(t=>t.toString(16).padStart(2,"0")).join("")}}class n{consoleLabelTextColorId="#599bd6";verbose=!1;componentName;colorId;constructor(t,e){this.componentName=t,this.colorId=e,this.loggerInitialized()}loggerInitialized(){this.verbose&&console.info("%c[Logger]%c ✔%c A new instance is created for %o %c.","background:Indigo;color:white;font-weight:bold;","color:green; font-weight:bold;","color:"+this.consoleLabelTextColorId+"; font-weight:bold;",this.componentName,"color:"+this.consoleLabelTextColorId+"; font-weight:bold;")}warn(t,e){console.warn(t,e)}error(t,e){console.error(t,e)}actionTriggered(t,e){console.info("%c["+this.componentName+"]%c ⚡%c "+t+": %o","background:"+this.colorId+";color:black;font-weight:bold;","color:orange;font-weight:bold","color:"+this.consoleLabelTextColorId+";font-style:italic",e)}actionSuccess(t,e=""){console.info("%c["+this.componentName+"]%c ✔%c "+t+". %o","background:"+this.colorId+";color:black;font-weight:bold;","color:green;font-weight:bold","color:"+this.consoleLabelTextColorId+";font-style:italic",e)}actionFailed(t,e="null"){console.info("%c["+this.componentName+"]%c ✖%c "+t+": %o","background:"+this.colorId+";color:black;font-weight:bold;","color:red","color:"+this.consoleLabelTextColorId+";font-style:italic",e)}repositoryLoaded(){this.toolLoaded("repository")}serviceLoaded(){this.toolLoaded("service")}componentLoaded(){this.toolLoaded("component")}toolLoaded(t){console.info("%c["+this.componentName+"]%c ✔%c The "+this.componentName+" "+t+" loaded.","background:"+this.colorId+";color:black;font-weight:bold;","color:green; font-weight:bold;","color:"+this.consoleLabelTextColorId+"; font-weight:bold;")}seekComponentElements(){console.info("%c["+this.componentName+"]%c ೱ%c looking for "+this.componentName+" elements.","background:"+this.colorId+";color:black;font-weight:bold;","color:lightBlue; font-weight:bold;","color:"+this.consoleLabelTextColorId+";font-style:italic")}componentElementsNotFound(){console.info("%c["+this.componentName+"]%c ✖%c No component elements found for "+this.componentName+".","background:"+this.colorId+";color:black;font-weight:bold;","color:red; font-weight:bold;","color:"+this.consoleLabelTextColorId+";font-style:italic")}componentElementInitSuccess(t){console.info("%c["+this.componentName+"]%c ✚%c a "+this.componentName+" element initialized %o","background:"+this.colorId+";color:black;font-weight:bold;","color:green; font-weight:bold;","color:"+this.consoleLabelTextColorId+";font-style:italic","#"+t)}}class i{utility;logger;constructor(t,e){this.utility=t,this.logger=e,this.logger.serviceLoaded(),this.initialize()}initialize(){this.utility.triggerEvent(document,"Service.Http.Ready",null,1)}doXmlHttpRequest(t,e,o,n,i,s,r){const l=(new Date).getTime();t=t+(-1===t.lastIndexOf("?")?"?":"&")+"timestamp="+l;const a=new XMLHttpRequest;a.open(e,t,o),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE)try{200===a.status?s(a.responseText):r(a.responseText)}catch(t){this.logger.warn("JSON parse error. Continue",t)}};let c,h=i;switch(h instanceof FormData&&"multipart/form-data"!==n&&(h=this.utility.formDataToObject(h)),h instanceof FormData||"multipart/form-data"!==n||(h=this.utility.objectToFormData(h)),n){case"application/json":c=JSON.stringify(h),a.setRequestHeader("Content-Type","application/json; charset=UTF-8");break;case"application/x-www-form-urlencoded":c=Object.keys(h).map(t=>t+"="+encodeURIComponent(String(h[t]??""))).join("&"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");break;case"multipart/form-data":c=h instanceof FormData?h:this.utility.objectToFormData(h);try{c instanceof FormData||a.setRequestHeader("Content-Type","multipart/form-data")}catch(t){}break;default:FormData,c=h}return a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(c),a}doFetch(t,e,o,n,i,s,r){let l,a=i;switch(n){case"application/json":a instanceof FormData&&(a=this.utility.formDataToObject(a)),l=JSON.stringify(a);break;case"application/x-www-form-urlencoded":a instanceof FormData&&(a=this.utility.formDataToObject(a)),l=Object.keys(a).map(t=>t+"="+encodeURIComponent(String(a[t]??""))).join("&");break;case"multipart/form-data":a instanceof FormData||(a=this.utility.objectToFormData(a)),l=a;break;default:FormData,l=a}const c={"X-Requested-With":"XMLHttpRequest"};l instanceof FormData||(c["Content-Type"]=n);const h={method:e,headers:c};return"GET"!==e&&"HEAD"!==e&&(h.body=l),this.logger.actionTriggered("Fetching URL",t),fetch(t,h).then(e=>e.ok?(this.logger.actionSuccess("URL fetch successful",t),s(e)):r(e)).catch(e=>{throw this.logger.actionFailed("URL fetch failed",t),e})}ajax(t="/",e="POST",o=!0,n="application/json",i={},s=null,r=null){const l="function"==typeof s?s:()=>{},a="function"==typeof r?r:()=>{};return this.doXmlHttpRequest(t,e,o,n,i,l,a)}fetch(t="/",e="POST",o=!0,n="application/json",i={},s=null,r=null){const l="function"==typeof s?s:t=>Promise.resolve(t),a="function"==typeof r?r:t=>Promise.reject(t);return this.doFetch(t,e,o,n,i,l,a)}}class s{utility;logger;constructor(t,e){this.utility=t,this.logger=e,this.logger.serviceLoaded(),this.initialize()}getScrollPositionInternal(){return window.scrollY||window.pageYOffset||0}getClientHeight(){return document.documentElement.clientHeight}getDocumentHeight(){return document.body.offsetHeight}getMaxScrollTop(){return this.getDocumentHeight()-this.getClientHeight()}getElementPositionInternal(t){const e=document.getElementById(t);return e?e.getBoundingClientRect().top:0}smoothScrollInternal=(t,e)=>{const o=e-t;if(Math.abs(o)<=1)return window.scrollTo(0,Math.round(e)),void this.logger.actionSuccess("Scroll end",e+"px");const n=.8*t+.2*e;window.scrollTo(0,Math.round(n)),window.setTimeout(()=>this.smoothScrollInternal(n,e),30)};initialize(){this.utility.triggerEvent(document,"Service.SmoothScroll.Ready",null,1)}getScrollPosition(){return this.getScrollPositionInternal()}getElementPositionById(t){return this.getElementPositionInternal(t)}scrollToElementById(t,e=0){if(!document.getElementById(t))return!1;const o=Math.min(this.getScrollPositionInternal()+this.getElementPositionInternal(t)-e,this.getMaxScrollTop());return this.logger.actionTriggered("Start scroll",this.getScrollPositionInternal()+"px"),this.smoothScrollInternal(this.getScrollPositionInternal(),o),!0}}class r{logger;element;chartStyles;currentYear;currentQuarter;constructor(t,e,o){this.element=t,this.chartStyles=e,this.logger=o,this.currentYear=(new Date).getFullYear(),this.currentQuarter=Math.ceil(((new Date).getMonth()+1)/4),this.init()}init(){const t=this.element.querySelector("dl.chart-dataset");if(!t)return void this.logger.warn("Chart dataset not found for element",this.element.id);const e=parseInt(t.dataset.rangefrom??"0",10),o=(new Date).getFullYear()+1,n=Array.from(t.querySelectorAll("dt")),i=Array.from(t.querySelectorAll("dd"));let s="";for(let t=o;t>=e;t--)for(let e=4;e>0;e--){const o=1===e?`<span>${t}</span>`:"";let n="gridRow";1===e&&(n+=" year"),e===this.currentQuarter&&t===this.currentYear&&(n+=" thisQuarter"),s+=`<div class="${n}">${o}</div>`}s+='<div class="labels">';for(const t of n)s+=`<div>${t.innerText??""}</div>`;s+="</div>";for(let t=0;t<i.length;t++){const o=i[t];if(!o)continue;const n=o.dataset.from??"",r=o.dataset.to??"",l=o.dataset.skill??"",a=t+1,c=this.getOffset(n,e),h=this.getOffset(r,e);s+=`<div class="skill ${l} col${a}" style="bottom: ${Math.max(0,Math.round(c))}px; height: ${Math.max(0,Math.round(h-c))}px;"></div>`}this.element.innerHTML=s,this.logger.componentElementInitSuccess(this.element.id)}getOffset(t,e){let o=this.chartStyles[".BarChart .grid"]?.paddingBottom??"0px";o=-1!==o.indexOf("px")?`${parseInt(o.replace(/px/,""),10)}`:`${parseInt((10*parseFloat(o.replace(/rem/,""))).toString(),10)}`;let n=this.chartStyles[".BarChart .gridRow"]?.height??"0px";n=-1!==n.indexOf("px")?`${parseInt(n.replace(/px/,""),10)}`:`${parseInt((10*parseFloat(n.replace(/rem/,""))).toString(),10)}`,"today"===t&&(t=`${this.currentYear}/Q${this.currentQuarter}`);const i=t.split("/Q"),s=i[0]??"0",r=i[1]??"1",l=parseInt(s,10)||0,a=parseInt(r,10)||1,c=parseInt(o,10);return(4*(l-e)+(a-1))*parseInt(n,10)+c}getId(){return this.element.id}getName(){return this.element.id}getHTMLElement(){return this.element}}class l{logger;utility;chartStyles;elements;idCounter=1;constructor(t,e){this.utility=t,this.logger=e,this.chartStyles=this.utility.readStylesheetsByClassName("BarChart"),this.elements=[],this.init()}init(){this.logger.componentLoaded(),this.logger.seekComponentElements();const t=document.querySelectorAll(".BarChart .grid");if(0===t.length)return void this.logger.componentElementsNotFound();const e=this.logger.componentName+" Element",o=this.utility.endarkenColor(this.logger.colorId);t.forEach(t=>{t instanceof HTMLDivElement&&(t.hasAttribute("id")||t.setAttribute("id","BarChart-"+this.idCounter++),this.elements.push(new r(t,this.chartStyles,new n(e,o))))}),this.utility.triggerEvent(document,"Component.BarChart.Ready",null,1)}getElements(){return this.elements}}class a{element;id;name;logger;initialized=!1;constructor(t,e){this.element=t,this.id=t.id||"",this.name=t.getAttribute("name")||t.id||"",this.logger=e,this.initialized=this.checkStructure(),this.initialized?(this.bindEvents(),this.logger.componentElementInitSuccess(this.id)):this.logger.componentElementsNotFound()}getId(){return this.id}getName(){return this.name}getHTMLElement(){return this.element}toggle(){this.toggleCollapsible(this.element)}static initAll(t,e){const o=document.querySelectorAll(t);if(!o||0===o.length)return e.componentElementsNotFound(),[];const n=[];return Array.from(o).forEach(t=>{try{const o=new a(t,e);o.initialized&&n.push(o)}catch(o){e.warn("Failed to initialize CollapsibleElement for element: "+(t.id||t.tagName),o)}}),n}checkStructure(){const t=this.element.parentNode?.querySelector(".Collapsible__content");return!!(t&&t instanceof HTMLDivElement)||(this.logger.warn("CollapsibleElement structure invalid for "+(this.element.id||this.element.tagName)),!1)}bindEvents(){this.element.addEventListener("click",()=>this.toggleCollapsible(this.element))}toggleCollapsible(t){if(!t)return;const e=t.parentNode?.querySelector(".Collapsible__content");if(!(e&&e instanceof HTMLDivElement))return void this.logger.warn("No content element found for "+t.id);t.classList.toggle("active");const o=t.classList.contains("active");this.logger.actionTriggered("Element "+(o?"opened":"closed"),t.id);const n=e;n.style.maxHeight&&""!==n.style.maxHeight?n.style.maxHeight="":n.style.maxHeight=n.scrollHeight+"px"}}class c{logger;utility;elements;idCounter=1;constructor(t,e){this.utility=t,this.logger=e,this.elements=[],this.init()}init(){this.logger.componentLoaded(),this.logger.seekComponentElements();const t=document.querySelectorAll(".Collapsible button");if(0===t.length)return void this.logger.componentElementsNotFound();const e=this.logger.componentName+" Element",o=this.utility.endarkenColor(this.logger.colorId);t.forEach(t=>{t instanceof HTMLButtonElement&&(t.hasAttribute("id")||t.setAttribute("id","Collapsible-"+this.idCounter++),this.elements.push(new a(t,new n(e,o))))}),this.utility.triggerEvent(document,"Component.Collapsible.Ready",null,1)}getElements(){return this.elements}}class h{element;logger;utility;dialogName;isModal;okButton;saveButton;applyButton;deleteButton;cancelButton;closeButton;tabSwitchButtons;tabs;constructor(t,e,o){this.element=t,this.logger=e,this.utility=o,this.dialogName=this.element.dataset?.name??this.element.id??"",this.isModal="modal"===this.element.dataset?.type,this.okButton=this.element.querySelector(".d-buttons__ok"),this.saveButton=this.element.querySelector(".d-buttons__save"),this.applyButton=this.element.querySelector(".d-buttons__apply"),this.deleteButton=this.element.querySelector(".d-buttons__delete"),this.cancelButton=this.element.querySelector(".d-buttons__cancel"),this.closeButton=this.element.querySelector(".d-buttons__close"),this.tabSwitchButtons=this.element.querySelectorAll(".d-buttons__tab"),this.tabs=this.element.querySelectorAll(".d-tab"),this.bindEvents(),this.logger.componentElementInitSuccess(this.element.id)}getId(){return this.element.id}getName(){return this.dialogName}getHTMLElement(){return this.element}open(){this.openDialog()}close(){this.closeDialog()}openDialog(){this.isModal?this.element.showModal():this.element.show(),this.logger.actionTriggered(`"${this.element.id}" Dialog window is opened`,this.element.id)}closeDialog(){this.element.close(),this.logger.actionTriggered(`"${this.element.id}" Dialog window is closed`,this.element.id)}showTab(t){this.tabs.forEach(e=>{e.dataset?.tab===t?e.classList.add("-active"):e.classList.remove("-active")})}bindEvents(){this.okButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.OK")}),this.saveButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.Save")}),this.applyButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.Apply")}),this.deleteButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.Delete")}),this.cancelButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.Cancel")}),this.closeButton?.addEventListener("click",()=>{this.closeDialog(),this.utility.triggerEvent(this.element,"Component.Dialog.Action.Close")}),this.tabSwitchButtons.forEach(t=>{const e=t.dataset?.target;e&&t.addEventListener("click",()=>{this.showTab(e)})})}}class g{logger;utility;elements;idCounter=1;constructor(t,e){this.utility=t,this.logger=e,this.elements=[],this.init()}init(){this.logger.componentLoaded(),this.logger.seekComponentElements();const t=document.querySelectorAll("dialog.DialogWindow");if(0===t.length)return void this.logger.componentElementsNotFound();const e=this.logger.componentName+" Element",o=this.utility.endarkenColor(this.logger.colorId);t.forEach(t=>{t instanceof HTMLDialogElement&&(t.hasAttribute("id")||t.setAttribute("id","DialogWindow-"+this.idCounter++),this.elements.push(new h(t,new n(e,o),this.utility)))}),this.utility.triggerEvent(document,"Component.DialogWindow.Ready",null,1)}getElements(){return this.elements}getDialogByName(t){for(const e of this.elements)if(e.getName()===t)return e;return null}}class d{element;logger;constructor(t,e){this.element=t,this.logger=new n("Lazy Load Image Element","SkyBlue"),this.logger.componentElementInitSuccess(this.element.id)}getId(){return this.element.id}getName(){return this.element.id}getHTMLElement(){return this.element}loadImage(){if(!this.element.hasAttribute("data-src"))return void this.logger.actionFailed('The element must have "data-src" attribute.');const t=this.element.dataset.src||"";""!==t.trim()?this.preloadImage(t).then(()=>{this.element.src=t,this.element.loading="lazy",this.element.removeAttribute("data-src"),this.logger.actionSuccess("A Lazy Load Image element loaded",this.element.id)}).catch(t=>{this.logger.actionFailed("An image resource is not found",t)}):this.logger.actionFailed("Invalid image source",String(t))}preloadImage(t){return new Promise((e,o)=>{const n=new Image;n.addEventListener("load",()=>e(),{once:!0}),n.addEventListener("error",t=>o(t),{once:!0}),n.src=t})}}class u{logger;utility;elements;idCounter=1;constructor(t,e){this.utility=t,this.logger=e,this.elements=[],this.init()}init(){this.logger.componentLoaded(),this.logger.seekComponentElements();const t=document.querySelectorAll("img[data-src]");if(0===t.length)return void this.logger.componentElementsNotFound();const e=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const e=this.getLazyLoadImageById(t.target.id);e&&e.loadImage()}})}),o=this.logger.componentName+" Element",i=this.utility.endarkenColor(this.logger.colorId);t.forEach(t=>{t instanceof HTMLImageElement&&(t.hasAttribute("id")||t.setAttribute("id","LazyLoadImage-"+this.idCounter++),this.elements.push(new d(t,new n(o,i))),e.observe(t))}),this.utility.triggerEvent(document,"Component.LazyLoadImage.Ready",null,1)}getElements(){return this.elements}getLazyLoadImageById(t){for(const e of this.elements)if(e.getId()===t)return e;return null}}class m{element;options;utility;logger;repository;state=!1;constructor(t,e,o,n,i){this.element=t,this.options=e,this.utility=o,this.logger=n,this.repository=i,this.init()}init(){this.element.innerHTML="";const t=this.repository.get(this.options.key);this.state="On"===t||this.options.state||!1;const e=this.options.label||'Toggle Feature "'+this.options.name+'" On or Off',o=document.createElement("input");o.type="checkbox",o.id=`${this.element.id}-${this.options.key}`,o.checked=this.state;const n=document.createElement("label");n.setAttribute("for",o.id);const i=document.createElement("span");n.innerHTML=e;const s=document.createElement("span");n.appendChild(i),n.appendChild(s),this.element.appendChild(o),this.element.appendChild(n),o.addEventListener("change",()=>{const t=o.checked;this.setState(t)}),this.setState(this.state),this.logger.componentElementInitSuccess(this.element.id)}setState(t){this.logger.actionTriggered("Set state ["+(t?"ON":"OFF")+"] for FeatureToggleSwitchElement",this.getName()),this.state=t;const e=this.element.querySelector('input[type="checkbox"]');if(e){e.checked=t;try{this.repository.set(this.options.key,t?"On":"Off")}catch(t){this.logger.warn("Failed to persist feature toggle state",t)}}else this.logger.actionFailed("Checkbox input not found in FeatureToggleSwitchElement",this.getId())}getId(){return this.element.id}getName(){return this.options.name}getHTMLElement(){return this.element}getState(){return this.state?"On":"Off"}on(){this.setState(!0)}off(){this.setState(!1)}}class p{logger;utility;elements;repository;idCounter=1;constructor(t,e,o){this.utility=t,this.logger=e,this.repository=o,this.elements=[],this.init()}init(){this.logger.componentLoaded(),this.logger.seekComponentElements();const t=document.querySelectorAll(".FeatureToggle[data-feature]");if(0===t.length)return void this.logger.componentElementsNotFound();const e=this.logger.componentName+" Element",o=this.utility.endarkenColor(this.logger.colorId);t.forEach(t=>{if(!(t instanceof HTMLDivElement))return;t.hasAttribute("id")||t.setAttribute("id","FeatureToggleSwitch-"+this.idCounter++);const i=t.dataset.feature??"General",s=t.dataset.label??i.toLowerCase().substring(0,1).toUpperCase()+i.toLowerCase().slice(1),r="on"===t.dataset.state,l=t.dataset.key??`feature_${i.toLowerCase()}`,a={name:i,label:s,state:r,key:l};this.elements.push(new m(t,a,this.utility,new n(e,o),this.repository))}),this.utility.triggerEvent(document,"Component.FeatureToggleSwitch.Ready",null,1)}getElements(){return this.elements}}let f;document.addEventListener("DOMContentLoaded",function(){const r=new o(new n("Utility","Salmon"));let a;new i(r,new n("Http","GreenYellow")),new s(r,new n("Smooth Scroll","SteelBlue"));try{a=new e(r,new n("Local Storage","SpringGreen"))}catch(e){console.error(e),a=new t(r,new n("Cookie Storage","SpringGreen")),a.renew("privacy_Accept_20251119")}new c(r,new n("Collapsible","PaleGoldenRod")),new l(r,new n("Bar Chart","MediumPurple")),f=new g(r,new n("Dialog Window","Turquoise")),new u(r,new n("Lazy Load Image","PowderBlue")),new p(r,new n("Feature Toggle Switch","Orange"),a)}),window.openDialog=function(t){f.getDialogByName(t)?.open()}})();